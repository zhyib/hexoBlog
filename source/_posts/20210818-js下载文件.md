---
title: js 下载文件
date: 2021-08-18 17:20:44
categories:
- 技术 
tags:
- 网络协议
---
### 静态资源

后台服务器有静态资源且是固定的文件名（GET方式下载文件）

```html
window.location.href="http://www.域名/template.xlsx(文件名)"
```



### 返回文件流

```js
axios.post(url, {
        params
    }, {
    	responseType: 'blob'
    })
    .then(function(res) {
        var blob = res.data;
        // FileReader主要用于将文件内容读入内存
        var reader = new FileReader();
        reader.readAsDataURL(blob);
        // onload当读取操作成功完成时调用
        reader.onload = function(e) {
        var a = document.createElement('a');
        // 获取文件名fileName
        var fileName = res.headers["content-disposition"].split("=");
        fileName = fileName[fileName.length - 1];
        fileName = fileName.replace(/"/g, "");
        a.download = fileName;
        a.href = e.target.result;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
	}
});
```

![一种实现](image-20210818195137755.png)
